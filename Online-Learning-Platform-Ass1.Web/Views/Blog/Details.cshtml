@model Online_Learning_Platform_Ass1.Service.DTOs.Blog.BlogReadDto

@{
    ViewData["Title"] = Model.Title;
}

<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">Blogs</a></li>
            <li class="breadcrumb-item active">@Model.Title</li>
        </ol>
    </nav>

    <article class="blog-post">
        <header class="mb-4">
            <h1 class="display-4">@Model.Title</h1>
            <div class="text-muted mb-3">
                <i class="bi bi-person-circle"></i> By <strong>@Model.AuthorName</strong>
                <span class="mx-2">|</span>
                <i class="bi bi-calendar3"></i> @Model.CreatedAt.ToString("MMMM dd, yyyy")
                <span class="mx-2">|</span>
                <span class="badge bg-@(Model.Status == "published" ? "success" : "warning")">
                    @Model.Status.ToUpper()
                </span>
            </div>
        </header>

        <div class="blog-content">
            @Html.Raw(Model.Content.Replace("\n", "<br/>"))
        </div>

        <hr class="my-4"/>

        <div class="d-flex justify-content-between align-items-center">
            <a asp-action="Index" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back to Blogs
            </a>

            @if (User.Identity?.IsAuthenticated == true && User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value == Model.AuthorId.ToString())
            {
                <div>
                    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
                        <i class="bi bi-pencil"></i> Edit
                    </a>
                    <form asp-action="Delete" asp-route-id="@Model.Id" method="post" class="d-inline" 
                          onsubmit="return confirm('Are you sure you want to delete this blog?');">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="btn btn-danger">
                            <i class="bi bi-trash"></i> Delete
                        </button>
                    </form>
                </div>
            }
        </div>
    </article>
</div>

<style>
    .blog-post {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .blog-content {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #333;
    }
</style>
